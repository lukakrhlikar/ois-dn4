{"filter":false,"title":"demo.js","tooltip":"/demo.js","undoManager":{"mark":20,"position":20,"stack":[[{"group":"doc","deltas":[{"start":{"row":460,"column":0},"end":{"row":460,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":1},"end":{"row":460,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":2},"end":{"row":460,"column":3},"action":"insert","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":3},"end":{"row":460,"column":4},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":4},"end":{"row":460,"column":5},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":5},"end":{"row":460,"column":6},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":6},"end":{"row":460,"column":7},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":7},"end":{"row":460,"column":8},"action":"insert","lines":["K"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":8},"end":{"row":460,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":9},"end":{"row":460,"column":10},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":10},"end":{"row":460,"column":11},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":11},"end":{"row":460,"column":12},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":12},"end":{"row":460,"column":13},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":13},"end":{"row":460,"column":14},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":14},"end":{"row":460,"column":15},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":12},"end":{"row":460,"column":15},"action":"remove","lines":["akr"]},{"start":{"row":460,"column":12},"end":{"row":460,"column":13},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":13},"end":{"row":460,"column":14},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":460,"column":14},"end":{"row":460,"column":15},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":85},"end":{"row":79,"column":95},"action":"remove","lines":["Prebivalec"]},{"start":{"row":79,"column":85},"end":{"row":79,"column":91},"action":"insert","lines":["Bolnik"]},{"start":{"row":80,"column":17},"end":{"row":80,"column":27},"action":"remove","lines":["Prebivalec"]},{"start":{"row":80,"column":17},"end":{"row":80,"column":23},"action":"insert","lines":["Bolnik"]},{"start":{"row":98,"column":1},"end":{"row":98,"column":3},"action":"remove","lines":["//"]},{"start":{"row":101,"column":1},"end":{"row":101,"column":3},"action":"remove","lines":["//"]},{"start":{"row":117,"column":70},"end":{"row":117,"column":71},"action":"remove","lines":["0"]},{"start":{"row":117,"column":70},"end":{"row":117,"column":88},"action":"insert","lines":["telesnaTemperatura"]},{"start":{"row":121,"column":56},"end":{"row":121,"column":58},"action":"remove","lines":["0,"]},{"start":{"row":121,"column":56},"end":{"row":121,"column":78},"action":"insert","lines":["nasicenostKrviSKisikom"]},{"start":{"row":145,"column":0},"end":{"row":166,"column":0},"action":"remove","lines":["function generator(){","\t$(\"#dodajVitalnoDatumInUra\").val(stevilka(1994, 2014) +\"-\"+ stevilka2(1,12)+\"-\"+stevilka2(1,28)+\"T\"+stevilka2(0,23)+\":\"+stevilka2(0,59));","\t$(\"#dodajVitalnoTelesnaVisina\").val(stevilka(130, 215));","\t$(\"#dodajVitalnoTelesnaTeza\").val(stevilka(40,180));","\t$(\"#dodajVitalnoKrvniTlakSistolicni\").val(stevilka(50, 220));","\t$(\"#dodajVitalnoKrvniTlakDiastolicni\").val(stevilka(40, 120));","\t$(\"#dodajVitalnoMerilec\").val('Marija');","}","","function stevilka(min, max){","\tvar st= Math.floor(Math.random()* (max - min + 1)) + min;","\treturn st;","}","","function stevilka2(min, max){","\tvar st= Math.floor(Math.random()* (max - min + 1)) + min;","\tif (st < 10){","\t\tst= \"0\"+st;","\t}","\treturn st;","}",""]},{"start":{"row":149,"column":0},"end":{"row":150,"column":0},"action":"insert","lines":["",""]},{"start":{"row":151,"column":1},"end":{"row":151,"column":11},"action":"insert","lines":["var tip = "]},{"start":{"row":151,"column":15},"end":{"row":151,"column":16},"action":"insert","lines":["p"]},{"start":{"row":151,"column":18},"end":{"row":151,"column":31},"action":"remove","lines":["zultatMeritve"]},{"start":{"row":151,"column":18},"end":{"row":151,"column":27},"action":"insert","lines":["beriTipZa"]},{"start":{"row":151,"column":33},"end":{"row":151,"column":35},"action":"remove","lines":["ih"]},{"start":{"row":151,"column":33},"end":{"row":151,"column":34},"action":"insert","lines":["e"]},{"start":{"row":151,"column":38},"end":{"row":151,"column":40},"action":"remove","lines":["ov"]},{"start":{"row":151,"column":38},"end":{"row":151,"column":39},"action":"insert","lines":["e"]},{"start":{"row":151,"column":42},"end":{"row":151,"column":47},"action":"remove","lines":["empty"]},{"start":{"row":151,"column":42},"end":{"row":151,"column":45},"action":"insert","lines":["val"]},{"start":{"row":152,"column":0},"end":{"row":153,"column":0},"action":"insert","lines":["",""]},{"start":{"row":153,"column":1},"end":{"row":168,"column":57},"action":"remove","lines":["\t\tvar AQL =\t\"select \" +","\t\t\t\t\t        \"a_a/data[at0002]/events[at0003]/time/value as cas, \" +","\t\t\t\t\t        \"a_b/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/magnitude as tlak_d, \" +                                         ","\t\t\t\t\t        \"a_b/data[at0001]/events[at0006]/data[at0003]/items[at0004]/value/magnitude as tlak_s, \" +","\t\t\t\t\t        \"a_c/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as visina, \" +","\t\t\t\t\t        \"a_d/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as teza \" +","\t\t\t\t\t\t\"from EHR e[ehr_id/value='\"+ehrId+\"']\" +","\t\t\t\t\t\t\"contains COMPOSITION a \" +","\t\t\t\t\t\t\"contains ( \" +","\t\t\t\t\t\t        \"OBSERVATION a_d[openEHR-EHR-OBSERVATION.body_weight.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_c[openEHR-EHR-OBSERVATION.height.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_temperature.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_b[openEHR-EHR-OBSERVATION.blood_pressure.v1]) \" +               ","\t\t\t\t\t\t\"offset 0 limit 5\";","\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/query?\" + $.param({\"aql\": AQL})"]},{"start":{"row":153,"column":1},"end":{"row":165,"column":67},"action":"insert","lines":["if (!ehrId || ehrId.trim().length == 0 || !tip || tip.trim().length == 0) {","\t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevan podatek!\");","\t} else {","\t\t$.ajax({","\t\t\turl: baseUrl + \"/demographics/ehr/\" + ehrId + \"/party\",","\t    \ttype: 'GET',","\t    \theaders: {\"Ehr-Session\": sessionId},","\t    \tsuccess: function (data) {","\t\t\t\tvar party = data.party;","\t\t\t\t$(\"#rezultatMeritveVitalnihZnakov\").html(\"<br/><span>Pridobivanje podatkov za <b>'\" + tip + \"'</b> bolnika <b>'\" + party.firstNames + \" \" + party.lastNames + \"'</b>.</span><br/><br/>\");","\t\t\t\tif (tip == \"telesna temperatura\") {","\t\t\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/view/\" + ehrId + \"/\" + \"body_temperature\""]},{"start":{"row":169,"column":0},"end":{"row":170,"column":1},"action":"insert","lines":["\t\t\t\t\t    \tif (res.length > 0) {","\t"]},{"start":{"row":170,"column":99},"end":{"row":172,"column":35},"action":"remove","lines":["/tr>\";","\t\t\t\t\t    \tif (res) {","\t\t\t\t\t    \t\tvar rows = res.resultSet"]},{"start":{"row":170,"column":99},"end":{"row":170,"column":151},"action":"insert","lines":["th class='text-right'>Telesna temperatura</th></tr>\""]},{"start":{"row":171,"column":29},"end":{"row":171,"column":31},"action":"remove","lines":["ow"]},{"start":{"row":171,"column":29},"end":{"row":171,"column":30},"action":"insert","lines":["e"]},{"start":{"row":172,"column":18},"end":{"row":172,"column":20},"action":"remove","lines":["//"]},{"start":{"row":172,"column":37},"end":{"row":172,"column":62},"action":"remove","lines":[" class='klikablien-datum'"]},{"start":{"row":172,"column":43},"end":{"row":172,"column":45},"action":"remove","lines":["ow"]},{"start":{"row":172,"column":43},"end":{"row":172,"column":44},"action":"insert","lines":["e"]},{"start":{"row":172,"column":49},"end":{"row":172,"column":52},"action":"remove","lines":["cas"]},{"start":{"row":172,"column":49},"end":{"row":172,"column":53},"action":"insert","lines":["time"]},{"start":{"row":172,"column":62},"end":{"row":173,"column":149},"action":"remove","lines":["\";","\t\t\t\t\t\t         //   results += \"<tr><td><button type='button' class='klikabilen' onclick='preberiMeritveVitalnihZnakov2(this)' value='\"+rows[i].cas+\""]},{"start":{"row":172,"column":62},"end":{"row":172,"column":83},"action":"insert","lines":["<td class='text-right"]},{"start":{"row":172,"column":86},"end":{"row":172,"column":87},"action":"insert","lines":[" "]},{"start":{"row":172,"column":90},"end":{"row":172,"column":92},"action":"remove","lines":["ow"]},{"start":{"row":172,"column":90},"end":{"row":172,"column":91},"action":"insert","lines":["e"]},{"start":{"row":172,"column":96},"end":{"row":173,"column":159},"action":"remove","lines":["cas +\"</button></td></tr>\"","   \t\t\t\t\t\t            results += \"<tr><td><button type='button' class='klikabilen' onclick='preberiMeritveVitalnihZnakov2(this.value)' value='\"+rows[i].cas+\"'>\""]},{"start":{"row":172,"column":96},"end":{"row":172,"column":115},"action":"insert","lines":["temperature + \" \" \t"]},{"start":{"row":172,"column":118},"end":{"row":172,"column":120},"action":"remove","lines":["ow"]},{"start":{"row":172,"column":118},"end":{"row":172,"column":119},"action":"insert","lines":["e"]},{"start":{"row":172,"column":124},"end":{"row":172,"column":127},"action":"remove","lines":["cas"]},{"start":{"row":172,"column":124},"end":{"row":172,"column":128},"action":"insert","lines":["unit"]},{"start":{"row":172,"column":130},"end":{"row":172,"column":131},"action":"insert","lines":[" "]},{"start":{"row":172,"column":134},"end":{"row":174,"column":18},"action":"remove","lines":["button></td></tr>\"","","\t\t\t\t\t\t            "]},{"start":{"row":172,"column":134},"end":{"row":172,"column":139},"action":"insert","lines":["td>\";"]},{"start":{"row":176,"column":0},"end":{"row":177,"column":0},"action":"remove","lines":["\t\t\t\t\t\t        ",""]},{"start":{"row":179,"column":0},"end":{"row":180,"column":0},"action":"remove","lines":["",""]},{"start":{"row":185,"column":2},"end":{"row":192,"column":19},"action":"remove","lines":["","} ","function preberiMeritveVitalnihZnakov2(a){","\tsessionId = getSessionId();\t","\t","\tvar ehrId = $(\"#meritveVitalnihZnakovEHRid\").val();","\t","\t$(\"#graf\").empty()"]},{"start":{"row":185,"column":2},"end":{"row":192,"column":144},"action":"insert","lines":["\t\t} else if (tip == \"telesna teža\") {","\t\t\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/view/\" + ehrId + \"/\" + \"weight\",","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tif (res.length > 0) {","\t\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Datum in ura</th><th class='text-right'>Telesna teža</th></tr>\""]},{"start":{"row":193,"column":1},"end":{"row":194,"column":0},"action":"remove","lines":["",""]},{"start":{"row":193,"column":1},"end":{"row":193,"column":3},"action":"insert","lines":["\t\t"]},{"start":{"row":193,"column":6},"end":{"row":196,"column":17},"action":"remove","lines":["var AQL =\t\"select \" +","\t\t\t\t\t        \"a_a/data[at0002]/events[at0003]/time/value as cas, \" +","\t\t\t\t\t        \"a_b/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/magnitude as tlak_d, \" +                                         ","\t\t\t\t\t        \"a_b"]},{"start":{"row":193,"column":6},"end":{"row":210,"column":12},"action":"insert","lines":["        for (var i in res) {","\t\t\t\t\t\t            results += \"<tr><td>\" + res[i].time + \"</td><td class='text-right'>\" + res[i].weight + \" \" \t+ res[i].unit + \"</td>\";","\t\t\t\t\t\t        }","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        $(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});\t\t\t\t\t","\t\t\t\t} else if (tip == \"telesna temperatura AQL\") {","\t\t\t\t\tvar AQL = ","\t\t\t\t\t\t\"select \" +","    \t\t\t\t\t\t\"t"]},{"start":{"row":210,"column":23},"end":{"row":210,"column":24},"action":"remove","lines":["1"]},{"start":{"row":210,"column":23},"end":{"row":210,"column":24},"action":"insert","lines":["2"]},{"start":{"row":210,"column":38},"end":{"row":210,"column":92},"action":"remove","lines":["6]/data[at0003]/items[at0004]/value/magnitude as tlak_"]},{"start":{"row":210,"column":38},"end":{"row":210,"column":57},"action":"insert","lines":["3]/time/value as ca"]},{"start":{"row":211,"column":0},"end":{"row":211,"column":4},"action":"insert","lines":["    "]},{"start":{"row":211,"column":9},"end":{"row":211,"column":21},"action":"remove","lines":["        \"a_c"]},{"start":{"row":211,"column":9},"end":{"row":211,"column":12},"action":"insert","lines":["\t\"t"]},{"start":{"row":211,"column":23},"end":{"row":211,"column":24},"action":"remove","lines":["1"]},{"start":{"row":211,"column":23},"end":{"row":211,"column":24},"action":"insert","lines":["2"]},{"start":{"row":211,"column":38},"end":{"row":211,"column":39},"action":"remove","lines":["2"]},{"start":{"row":211,"column":38},"end":{"row":211,"column":39},"action":"insert","lines":["3"]},{"start":{"row":211,"column":51},"end":{"row":211,"column":52},"action":"remove","lines":["3"]},{"start":{"row":211,"column":51},"end":{"row":211,"column":52},"action":"insert","lines":["1"]},{"start":{"row":211,"column":87},"end":{"row":211,"column":93},"action":"remove","lines":["visina"]},{"start":{"row":211,"column":87},"end":{"row":211,"column":107},"action":"insert","lines":["temperatura_vrednost"]},{"start":{"row":212,"column":0},"end":{"row":212,"column":4},"action":"insert","lines":["    "]},{"start":{"row":212,"column":9},"end":{"row":212,"column":21},"action":"remove","lines":["        \"a_d"]},{"start":{"row":212,"column":9},"end":{"row":212,"column":12},"action":"insert","lines":["\t\"t"]},{"start":{"row":212,"column":74},"end":{"row":212,"column":90},"action":"remove","lines":["magnitude as tez"]},{"start":{"row":212,"column":74},"end":{"row":212,"column":99},"action":"insert","lines":["units as temperatura_enot"]},{"start":{"row":213,"column":18},"end":{"row":213,"column":20},"action":"insert","lines":["e/"]},{"start":{"row":213,"column":35},"end":{"row":213,"column":36},"action":"remove","lines":["+"]},{"start":{"row":213,"column":35},"end":{"row":213,"column":38},"action":"insert","lines":[" + "]},{"start":{"row":213,"column":43},"end":{"row":216,"column":15},"action":"remove","lines":["+\"']\" +","\t\t\t\t\t\t\"contains COMPOSITION a \" +","\t\t\t\t\t\t\"contains ( \" +","\t\t\t\t\t\t        \""]},{"start":{"row":213,"column":43},"end":{"row":214,"column":16},"action":"insert","lines":[" + \"'] \" +","\t\t\t\t\t\t\"contains "]},{"start":{"row":214,"column":28},"end":{"row":214,"column":31},"action":"remove","lines":["a_d"]},{"start":{"row":214,"column":28},"end":{"row":214,"column":29},"action":"insert","lines":["t"]},{"start":{"row":214,"column":59},"end":{"row":214,"column":65},"action":"remove","lines":["weight"]},{"start":{"row":214,"column":59},"end":{"row":214,"column":70},"action":"insert","lines":["temperature"]},{"start":{"row":214,"column":74},"end":{"row":214,"column":78},"action":"remove","lines":[" and"]},{"start":{"row":215,"column":6},"end":{"row":218,"column":16},"action":"remove","lines":["        \"OBSERVATION a_c[openEHR-EHR-OBSERVATION.height.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_temperature.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_b[openEHR-EHR-OBSERVATION.blood_pressure.v1]) \" +               ","\t\t\t\t\t\t\"offset 0 "]},{"start":{"row":215,"column":6},"end":{"row":217,"column":7},"action":"insert","lines":["\"where t/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude<35 \" +","\t\t\t\t\t\t\"order by t/data[at0002]/events[at0003]/time/value desc \" +","\t\t\t\t\t\t\""]},{"start":{"row":217,"column":13},"end":{"row":217,"column":14},"action":"remove","lines":["5"]},{"start":{"row":217,"column":13},"end":{"row":217,"column":15},"action":"insert","lines":["10"]},{"start":{"row":218,"column":0},"end":{"row":218,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":223,"column":80},"end":{"row":223,"column":84},"action":"remove","lines":["Graf"]},{"start":{"row":223,"column":80},"end":{"row":223,"column":139},"action":"insert","lines":["Datum in ura</th><th class='text-right'>Telesna temperatura"]},{"start":{"row":227,"column":14},"end":{"row":228,"column":32},"action":"remove","lines":["\t","\t\t\t\t\t\t            if (rows[i].ca"]},{"start":{"row":227,"column":14},"end":{"row":227,"column":24},"action":"insert","lines":["    result"]},{"start":{"row":227,"column":26},"end":{"row":227,"column":27},"action":"remove","lines":["="]},{"start":{"row":227,"column":26},"end":{"row":227,"column":27},"action":"insert","lines":["+"]},{"start":{"row":227,"column":29},"end":{"row":245,"column":30},"action":"remove","lines":["a){","\t\t\t\t\t\t            \t","\t\t\t\t\t\t\t            var visina = rows[i].visina;","\t\t\t\t\t\t\t            var teza = rows[i].teza;","\t\t\t\t\t\t\t            var tlak_s = rows[i].tlak_s;","\t\t\t\t\t\t\t            var tlak_d = rows[i].tlak_d;","\t\t\t\t\t\t\t            var bmi = rows[i].teza /((rows[i].visina/100)*(rows[i].visina/100));","\t\t\t\t\t\t\t            var tlakS = rows[i].tlak_s+rows[i].tlak_d;","\t\t\t\t\t\t\t           \tvar x=79;","\t\t\t\t\t\t\t           \tvar y=0;","\t\t\t\t\t\t\t           \tvar z=0;","\t\t\t\t\t\t\t           \tif (bmi >=20 && bmi<25){","\t\t\t\t\t\t\t           \t\ty = x;","\t\t\t\t\t\t\t           \t} else if(bmi <20 && bmi>=15 ) {","\t\t\t\t\t\t\t           \t\ty = x + 3 ;","\t\t\t\t\t\t\t           \t}\telse if(bmi <15 ) {","\t\t\t\t\t\t\t           \t\ty = x - 3 ;","\t\t\t\t\t\t\t           \t}\telse if(bmi >=30 ) {","\t\t\t\t\t\t\t           \t\ty = x - 5 "]},{"start":{"row":227,"column":29},"end":{"row":227,"column":162},"action":"insert","lines":["\"<tr><td>\" + rows[i].cas + \"</td><td class='text-right'>\" + rows[i].temperatura_vrednost + \" \" \t+ rows[i].temperatura_enota + \"</td>\""]},{"start":{"row":228,"column":6},"end":{"row":228,"column":9},"action":"remove","lines":["\t  "]},{"start":{"row":228,"column":14},"end":{"row":238,"column":28},"action":"remove","lines":[" \t}\telse if(bmi <30 && bmi>=25 ) {","\t\t\t\t\t\t\t           \t\ty = x - 3 ;","\t\t\t\t\t\t\t           \t}","\t\t\t\t\t\t\t            if (tlakS<=170){","\t\t\t\t\t\t\t            \tz = y - 5;","\t\t\t\t\t\t\t            } else if (tlakS>170 && tlakS<=185){","\t\t\t\t\t\t\t            \tz= y - 1;","\t\t\t\t\t\t\t            }\telse if (tlakS<=190 && tlakS>185){","\t\t\t\t\t\t\t            \tz= y;","\t\t\t\t\t\t\t            } else if (tlakS>190 && tlakS<=200){","\t\t\t\t\t\t\t            \tz= y - 1"]},{"start":{"row":228,"column":14},"end":{"row":229,"column":35},"action":"insert","lines":["}","\t\t\t\t\t\t        results += \"</table>\""]},{"start":{"row":230,"column":0},"end":{"row":230,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":230,"column":14},"end":{"row":335,"column":18},"action":"remove","lines":["    } else if (tlakS>200 && tlakS<=230){","\t\t\t\t\t\t\t            \tz= y - 2;","\t\t\t\t\t\t\t            } else if (tlakS>230 && tlakS<=250){","\t\t\t\t\t\t\t            \tz= y - 3;","\t\t\t\t\t\t\t            } else if (tlakS>250 && tlakS<=300){","\t\t\t\t\t\t\t            \tz= y - 4;","\t\t\t\t\t\t\t            } else if (tlakS>300 && tlakS<=340){","\t\t\t\t\t\t\t            \tz= y - 10;","\t\t\t\t\t\t\t            } else if (tlakS>340){","\t\t\t\t\t\t\t            \tz= y - 15;","\t\t\t\t\t\t\t            }","\t\t\t\t\t\t            ","\t\t\t\t\t\t            }","\t\t\t\t\t\t            ","\t\t\t\t\t\t            ///graffff","\t\t\t\t\t\t        }","\t\t\t\t\t\t        console.log(x+\" \"+y+\" \"+z);","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        ","\t\t\t\t\t\t        graf(x, y, z);","\t\t\t\t\t\t        ","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});","\t\t","}","","function graf(x, y, z){","","\tvar w = 400;","\tvar h = 300;","\tvar padding = 30;","\t","\t//The data for our line","\tvar lineData = [ { \"x\": 3,   \"y\": x},  { \"x\": 6,  \"y\": y}, { \"x\": 9,  \"y\": z}];","\t","\tvar xScale = d3.scale.linear().domain([0, 12]).range([padding, w - padding]);","\tvar yScale = d3.scale.linear().domain([60, 90]).range([h - padding, padding]);","\t","\t//The SVG Container","\tvar svg = d3.select(\"#graf\").append(\"svg\").style(\"border\", \"1px solid red\").style(\"background-color\", \"black\").attr(\"width\", w).attr(\"height\", h);","\t","\t//Define and draw X and Y axes","\tvar xAxis = d3.svg.axis()","\t    .scale(xScale)","\t    .orient(\"bottom\")","\t    .ticks(10);","\t","\tvar yAxis = d3.svg.axis()","\t    .scale(yScale)","\t    .orient(\"left\")","\t    .ticks(10);","\t","\t/*svg.append(\"g\")","\t    .attr(\"class\", \"axis\")","\t    .attr(\"transform\", \"translate(0,\" + (h - padding) + \")\")","\t\t.style(\"fill\",\"red\")","\t    .call(xAxis);*/","\t","\tsvg.append(\"g\")","\t    .attr(\"class\", \"axis\")","\t    .attr(\"transform\", \"translate(\" + padding + \",0)\")","\t\t.style(\"fill\",\"red\")","\t    .call(yAxis);","\t","\tsvg.append(\"text\")","\t\t.attr(\"transform\", \"rotate(-90)\")","\t\t.attr(\"y\", 40)","\t\t.attr(\"x\",-50 - (h / 2))","\t\t.attr(\"dy\", \"1em\")","\t\t.style(\"text-anchor\", \"start\")","\t\t.style(\"fill\",\"red\")","\t\t.text(\"Pričakovana starost ob smrti\");","\t ","\t var lineFunction = d3.svg.line()","\t                          .x(function(d) { return xScale(d.x); })","\t                          .y(function(d) { return yScale(d.y); })","\t                         .interpolate(\"linear\");","\t","\t","\t","\t","\tvar lineGraph = svg.append(\"path\")","\t                            .attr(\"d\", lineFunction(lineData))","\t                           .attr(\"stroke\", \"red\")","\t                            .attr(\"stroke-width\", 2)","\t                            .attr(\"fill\", \"none\");","\t","\t","\t var circles = svg.selectAll(\"circle\").data(lineData).enter().append(\"circle\");","\t var circleAttributes = ","\t circles.attr(\"cx\", function(d) { return xScale(d.x); }).attr(\"cy\", function(d) { return yScale(d.y); }).attr(\"r\", function (d) { return 10; }).style(\"fill\", function(d,i)","\t \t{","\t \t\tif (i == 0) return \"red\";","\t \t\telse if (i == 1) return \"green\";","\t \t\telse if (i == 2) return \"orange\";","\t \t});","\t","\t svg.append(\"text"]},{"start":{"row":230,"column":14},"end":{"row":244,"column":166},"action":"insert","lines":["$(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});","\t\t\t\t}","\t    \t},","\t    \terror: function(err) {","\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!"]},{"start":{"row":244,"column":168},"end":{"row":244,"column":169},"action":"insert","lines":[";"]},{"start":{"row":245,"column":1},"end":{"row":263,"column":39},"action":"remove","lines":[" .attr(\"x\",xScale(2))","\t .attr(\"y\",yScale(88))","\t .style(\"fill\",\"red\")","\t .style(\"text-anchor\", \"start\")","\t .text(\"Povprečna starost (\" + x+ \" let)\");","\t","\t svg.append(\"text\")","\t .attr(\"x\",xScale(2))","\t .attr(\"y\",yScale(86))","\t .style(\"fill\",\"green\")","\t .style(\"text-anchor\", \"start\")","\t .text(\"Indeks telesne mase (\"+ y+ \" let)\" );","\t","\t svg.append(\"text\")","\t .attr(\"x\",xScale(2))","\t .attr(\"y\",yScale(84))","\t .style(\"fill\",\"orange\")","\t .style(\"text-anchor\", \"start\")","         .text(\"Pritisk (\" + z +\" let)\""]},{"start":{"row":245,"column":1},"end":{"row":247,"column":3},"action":"insert","lines":["\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t    \t}","\t\t}"]},{"start":{"row":248,"column":0},"end":{"row":248,"column":2},"action":"insert","lines":["\t}"]},{"start":{"row":271,"column":2},"end":{"row":271,"column":4},"action":"remove","lines":["//"]},{"start":{"row":272,"column":52},"end":{"row":272,"column":53},"action":"remove","lines":["4"]},{"start":{"row":272,"column":52},"end":{"row":272,"column":53},"action":"insert","lines":["5"]},{"start":{"row":273,"column":53},"end":{"row":273,"column":54},"action":"remove","lines":["5"]},{"start":{"row":273,"column":53},"end":{"row":273,"column":54},"action":"insert","lines":["6"]},{"start":{"row":274,"column":2},"end":{"row":274,"column":4},"action":"remove","lines":["//"]},{"start":{"row":275,"column":0},"end":{"row":276,"column":0},"action":"remove","lines":["\t\t//$(\"#dodajIndeksTelesneMase\").val(podatki[8]);",""]},{"start":{"row":275,"column":40},"end":{"row":275,"column":41},"action":"remove","lines":["6"]},{"start":{"row":275,"column":40},"end":{"row":275,"column":41},"action":"insert","lines":["8"]},{"start":{"row":281,"column":1},"end":{"row":307,"column":0},"action":"remove","lines":["\t","\t\t// Skrij graf","\t\t$(\"#graf\").empty();","\t});","\t","\t/*$(\".klikabilen\").click(function() {","\t    preberiMeritveVitalnihZnakov2($(this).html());","\t});*/","","});","","//*[@id=\"tabele\"]/table[1]/tbody/tr/td/div[2]/table/tbody/tr[14]/td[6]/b zenske 82,9 let","//*[@id=\"tabele\"]/table[1]/tbody/tr/td/div[2]/table/tbody/tr[15]/td[6]/b moski  76,6 let","//#tabele > table:nth-child(1) > tbody > tr > td > div:nth-child(2) > table > tbody > tr:nth-child(15) > td:nth-child(6) > b css moski","//#tabele > table:nth-child(1) > tbody > tr > td > div:nth-child(2) > table > tbody > tr:nth-child(14) > td:nth-child(6) > b css zenske","//http://www.stat.si/novica_prikazi.aspx?id=4815","","","","//function zunanji_vir1(){","//\tvar a;","//\ta = 'select * from html where url=\"http://www.stat.si/novica_prikazi.aspx?id=4815\" and compat=\"html5\" and xpath=\"*//td/b\"'; //mi najde vse vrednosti treba sam 12, 13","//\tconsole.log(a);","//}","//Luka Krhlikar","",""]},{"start":{"row":281,"column":1},"end":{"row":282,"column":3},"action":"insert","lines":["});","});"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":282,"column":3},"action":"remove","lines":["","var baseUrl = 'https://rest.ehrscape.com/rest/v1';","var queryUrl = baseUrl + '/query';","","var username = \"ois.seminar\";","var password = \"ois4fri\";","","function getSessionId() {","    var response = $.ajax({","        type: \"POST\",","        url: baseUrl + \"/session?username=\" + encodeURIComponent(username) +","                \"&password=\" + encodeURIComponent(password),","        async: false","    });","    return response.responseJSON.sessionId;","}","","","function kreirajEHRzaBolnika() {","\tsessionId = getSessionId();","","\tvar ime = $(\"#kreirajIme\").val();","\tvar priimek = $(\"#kreirajPriimek\").val();","\tvar datumRojstva = $(\"#kreirajDatumRojstva\").val();","","\tif (!ime || !priimek || !datumRojstva || ime.trim().length == 0 || priimek.trim().length == 0 || datumRojstva.trim().length == 0) {","\t\t$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","\t} else {","\t\t$.ajaxSetup({","\t\t    headers: {\"Ehr-Session\": sessionId}","\t\t});","\t\t$.ajax({","\t\t    url: baseUrl + \"/ehr\",","\t\t    type: 'POST',","\t\t    success: function (data) {","\t\t        var ehrId = data.ehrId;","\t\t        var partyData = {","\t\t            firstNames: ime,","\t\t            lastNames: priimek,","\t\t            dateOfBirth: datumRojstva,","\t\t            partyAdditionalInfo: [{key: \"ehrId\", value: ehrId}]","\t\t        };","\t\t        $.ajax({","\t\t            url: baseUrl + \"/demographics/party\",","\t\t            type: 'POST',","\t\t            contentType: 'application/json',","\t\t            data: JSON.stringify(partyData),","\t\t            success: function (party) {","\t\t                if (party.action == 'CREATE') {","\t\t                    $(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>Uspešno kreiran EHR '\" + ehrId + \"'.</span>\");","\t\t                    console.log(\"Uspešno kreiran EHR '\" + ehrId + \"'.\");","\t\t                    $(\"#preberiEHRid\").val(ehrId);","\t\t                }","\t\t            },","\t\t            error: function(err) {","\t\t            \t$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t            \tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t            }","\t\t        });","\t\t    }","\t\t});","\t}","}","","","function preberiEHRodBolnika() {","\tsessionId = getSessionId();","","\tvar ehrId = $(\"#preberiEHRid\").val();","","\tif (!ehrId || ehrId.trim().length == 0) {","\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevan podatek!\");","\t} else {","\t\t$.ajax({","\t\t\turl: baseUrl + \"/demographics/ehr/\" + ehrId + \"/party\",","\t\t\ttype: 'GET',","\t\t\theaders: {\"Ehr-Session\": sessionId},","\t    \tsuccess: function (data) {","\t\t\t\tvar party = data.party;","\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>Bolnik '\" + party.firstNames + \" \" + party.lastNames + \"', ki se je rodil '\" + party.dateOfBirth + \"'.</span>\");","\t\t\t\tconsole.log(\"Bolnik '\" + party.firstNames + \" \" + party.lastNames + \"', ki se je rodil '\" + party.dateOfBirth + \"'.\");","\t\t\t},","\t\t\terror: function(err) {","\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t}","\t\t});","\t}\t","}","","","function dodajMeritveVitalnihZnakov() {","\tsessionId = getSessionId();","","\tvar ehrId = $(\"#dodajVitalnoEHR\").val();","\tvar datumInUra = $(\"#dodajVitalnoDatumInUra\").val();","\tvar telesnaVisina = $(\"#dodajVitalnoTelesnaVisina\").val();","\tvar telesnaTeza = $(\"#dodajVitalnoTelesnaTeza\").val();","\tvar telesnaTemperatura = $(\"#dodajVitalnoTelesnaTemperatura\").val();","\tvar sistolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakSistolicni\").val();","\tvar diastolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakDiastolicni\").val();","\tvar nasicenostKrviSKisikom = $(\"#dodajVitalnoNasicenostKrviSKisikom\").val();","\tvar merilec = $(\"#dodajVitalnoMerilec\").val();","","\tif (!ehrId || ehrId.trim().length == 0) {","\t\t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","\t} else {","\t\t$.ajaxSetup({","\t\t    headers: {\"Ehr-Session\": sessionId}","\t\t});","\t\tvar podatki = {","\t\t\t// Preview Structure: https://rest.ehrscape.com/rest/v1/template/Vital%20Signs/example","\t\t    \"ctx/language\": \"en\",","\t\t    \"ctx/territory\": \"SI\",","\t\t    \"ctx/time\": datumInUra,","\t\t    \"vital_signs/height_length/any_event/body_height_length\": telesnaVisina,","\t\t    \"vital_signs/body_weight/any_event/body_weight\": telesnaTeza,","\t\t   \t\"vital_signs/body_temperature/any_event/temperature|magnitude\": telesnaTemperatura,","\t\t    \"vital_signs/body_temperature/any_event/temperature|unit\": \"°C\",","\t\t    \"vital_signs/blood_pressure/any_event/systolic\": sistolicniKrvniTlak,","\t\t    \"vital_signs/blood_pressure/any_event/diastolic\": diastolicniKrvniTlak,","\t\t    \"vital_signs/indirect_oximetry:0/spo2|numerator\": nasicenostKrviSKisikom","\t\t};","\t\tvar parametriZahteve = {","\t\t    \"ehrId\": ehrId,","\t\t    templateId: 'Vital Signs',","\t\t    format: 'FLAT',","\t\t    committer: merilec","\t\t};","\t\t$.ajax({","\t\t    url: baseUrl + \"/composition?\" + $.param(parametriZahteve),","\t\t    type: 'POST',","\t\t    contentType: 'application/json',","\t\t    data: JSON.stringify(podatki),","\t\t    success: function (res) {","\t\t    \tconsole.log(res.meta.href);","\t\t        $(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>\" + res.meta.href + \".</span>\");","\t\t    },","\t\t    error: function(err) {","\t\t    \t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t    }","\t\t});","\t}","}","","","function preberiMeritveVitalnihZnakov() {","\tsessionId = getSessionId();\t","","\tvar ehrId = $(\"#meritveVitalnihZnakovEHRid\").val();","\tvar tip = $(\"#preberiTipZaVitalneZnake\").val();","","\tif (!ehrId || ehrId.trim().length == 0 || !tip || tip.trim().length == 0) {","\t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevan podatek!\");","\t} else {","\t\t$.ajax({","\t\t\turl: baseUrl + \"/demographics/ehr/\" + ehrId + \"/party\",","\t    \ttype: 'GET',","\t    \theaders: {\"Ehr-Session\": sessionId},","\t    \tsuccess: function (data) {","\t\t\t\tvar party = data.party;","\t\t\t\t$(\"#rezultatMeritveVitalnihZnakov\").html(\"<br/><span>Pridobivanje podatkov za <b>'\" + tip + \"'</b> bolnika <b>'\" + party.firstNames + \" \" + party.lastNames + \"'</b>.</span><br/><br/>\");","\t\t\t\tif (tip == \"telesna temperatura\") {","\t\t\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/view/\" + ehrId + \"/\" + \"body_temperature\",","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tif (res.length > 0) {","\t\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Datum in ura</th><th class='text-right'>Telesna temperatura</th></tr>\";","\t\t\t\t\t\t        for (var i in res) {","\t\t\t\t\t\t            results += \"<tr><td>\" + res[i].time + \"</td><td class='text-right'>\" + res[i].temperature + \" \" \t+ res[i].unit + \"</td>\";","\t\t\t\t\t\t        }","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        $(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});","\t\t\t\t} else if (tip == \"telesna teža\") {","\t\t\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/view/\" + ehrId + \"/\" + \"weight\",","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tif (res.length > 0) {","\t\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Datum in ura</th><th class='text-right'>Telesna teža</th></tr>\";","\t\t\t\t\t\t        for (var i in res) {","\t\t\t\t\t\t            results += \"<tr><td>\" + res[i].time + \"</td><td class='text-right'>\" + res[i].weight + \" \" \t+ res[i].unit + \"</td>\";","\t\t\t\t\t\t        }","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        $(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});\t\t\t\t\t","\t\t\t\t} else if (tip == \"telesna temperatura AQL\") {","\t\t\t\t\tvar AQL = ","\t\t\t\t\t\t\"select \" +","    \t\t\t\t\t\t\"t/data[at0002]/events[at0003]/time/value as cas, \" +","    \t\t\t\t\t\t\"t/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as temperatura_vrednost, \" +","    \t\t\t\t\t\t\"t/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/units as temperatura_enota \" +","\t\t\t\t\t\t\"from EHR e[e/ehr_id/value='\" + ehrId + \"'] \" +","\t\t\t\t\t\t\"contains OBSERVATION t[openEHR-EHR-OBSERVATION.body_temperature.v1] \" +","\t\t\t\t\t\t\"where t/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude<35 \" +","\t\t\t\t\t\t\"order by t/data[at0002]/events[at0003]/time/value desc \" +","\t\t\t\t\t\t\"limit 10\";","\t\t\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/query?\" + $.param({\"aql\": AQL}),","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Datum in ura</th><th class='text-right'>Telesna temperatura</th></tr>\";","\t\t\t\t\t    \tif (res) {","\t\t\t\t\t    \t\tvar rows = res.resultSet;","\t\t\t\t\t\t        for (var i in rows) {","\t\t\t\t\t\t            results += \"<tr><td>\" + rows[i].cas + \"</td><td class='text-right'>\" + rows[i].temperatura_vrednost + \" \" \t+ rows[i].temperatura_enota + \"</td>\";","\t\t\t\t\t\t        }","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        $(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});","\t\t\t\t}","\t    \t},","\t    \terror: function(err) {","\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t    \t}","\t\t});","\t}","}","","","$(document).ready(function() {","\t$('#preberiObstojeciEHR').change(function() {","\t\t$(\"#preberiSporocilo\").html(\"\");","\t\t$(\"#preberiEHRid\").val($(this).val());","\t});","\t$('#preberiPredlogoBolnika').change(function() {","\t\t$(\"#kreirajSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\",\");","\t\t$(\"#kreirajIme\").val(podatki[0]);","\t\t$(\"#kreirajPriimek\").val(podatki[1]);","\t\t$(\"#kreirajDatumRojstva\").val(podatki[2]);","\t});","\t$('#preberiObstojeciVitalniZnak').change(function() {","\t\t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\"|\");","\t\t$(\"#dodajVitalnoEHR\").val(podatki[0]);","\t\t$(\"#dodajVitalnoDatumInUra\").val(podatki[1]);","\t\t$(\"#dodajVitalnoTelesnaVisina\").val(podatki[2]);","\t\t$(\"#dodajVitalnoTelesnaTeza\").val(podatki[3]);","\t\t$(\"#dodajVitalnoTelesnaTemperatura\").val(podatki[4]);","\t\t$(\"#dodajVitalnoKrvniTlakSistolicni\").val(podatki[5]);","\t\t$(\"#dodajVitalnoKrvniTlakDiastolicni\").val(podatki[6]);","\t\t$(\"#dodajVitalnoNasicenostKrviSKisikom\").val(podatki[7]);","\t\t$(\"#dodajVitalnoMerilec\").val(podatki[8]);","\t});","\t$('#preberiEhrIdZaVitalneZnake').change(function() {","\t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\t$(\"#rezultatMeritveVitalnihZnakov\").html(\"\");","\t\t$(\"#meritveVitalnihZnakovEHRid\").val($(this).val());","\t});","});"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":462,"column":0},"action":"insert","lines":["","var baseUrl = 'https://rest.ehrscape.com/rest/v1';","var queryUrl = baseUrl + '/query';","","var username = \"ois.seminar\";","var password = \"ois4fri\";","","function getSessionId() {","    var response = $.ajax({","        type: \"POST\",","        url: baseUrl + \"/session?username=\" + encodeURIComponent(username) +","                \"&password=\" + encodeURIComponent(password),","        async: false","    });","    return response.responseJSON.sessionId;","}","","","function kreirajEHRzaBolnika() {","\tsessionId = getSessionId();","","\tvar ime = $(\"#kreirajIme\").val();","\tvar priimek = $(\"#kreirajPriimek\").val();","\tvar datumRojstva = $(\"#kreirajDatumRojstva\").val();","","\tif (!ime || !priimek || !datumRojstva || ime.trim().length == 0 || priimek.trim().length == 0 || datumRojstva.trim().length == 0) {","\t\t$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","\t} else {","\t\t$.ajaxSetup({","\t\t    headers: {\"Ehr-Session\": sessionId}","\t\t});","\t\t$.ajax({","\t\t    url: baseUrl + \"/ehr\",","\t\t    type: 'POST',","\t\t    success: function (data) {","\t\t        var ehrId = data.ehrId;","\t\t        var partyData = {","\t\t            firstNames: ime,","\t\t            lastNames: priimek,","\t\t            dateOfBirth: datumRojstva,","\t\t            partyAdditionalInfo: [{key: \"ehrId\", value: ehrId}]","\t\t        };","\t\t        $.ajax({","\t\t            url: baseUrl + \"/demographics/party\",","\t\t            type: 'POST',","\t\t            contentType: 'application/json',","\t\t            data: JSON.stringify(partyData),","\t\t            success: function (party) {","\t\t                if (party.action == 'CREATE') {","\t\t                    $(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>Uspešno kreiran EHR '\" + ehrId + \"'.</span>\");","\t\t                    console.log(\"Uspešno kreiran EHR '\" + ehrId + \"'.\");","\t\t                    $(\"#preberiEHRid\").val(ehrId);","\t\t                }","\t\t            },","\t\t            error: function(err) {","\t\t            \t$(\"#kreirajSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t            \tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t            }","\t\t        });","\t\t    }","\t\t});","\t}","}","","","function preberiEHRodBolnika() {","\tsessionId = getSessionId();","","\tvar ehrId = $(\"#preberiEHRid\").val();","","\tif (!ehrId || ehrId.trim().length == 0) {","\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevan podatek!\");","\t} else {","\t\t$.ajax({","\t\t\turl: baseUrl + \"/demographics/ehr/\" + ehrId + \"/party\",","\t\t\ttype: 'GET',","\t\t\theaders: {\"Ehr-Session\": sessionId},","\t    \tsuccess: function (data) {","\t\t\t\tvar party = data.party;","\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>Prebivalec '\" + party.firstNames + \" \" + party.lastNames + \"', ki se je rodil '\" + party.dateOfBirth + \"'.</span>\");","\t\t\t\tconsole.log(\"Prebivalec '\" + party.firstNames + \" \" + party.lastNames + \"', ki se je rodil '\" + party.dateOfBirth + \"'.\");","\t\t\t},","\t\t\terror: function(err) {","\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t}","\t\t});","\t}\t","}","","","function dodajMeritveVitalnihZnakov() {","\tsessionId = getSessionId();","","\tvar ehrId = $(\"#dodajVitalnoEHR\").val();","\tvar datumInUra = $(\"#dodajVitalnoDatumInUra\").val();","\tvar telesnaVisina = $(\"#dodajVitalnoTelesnaVisina\").val();","\tvar telesnaTeza = $(\"#dodajVitalnoTelesnaTeza\").val();","\t//var telesnaTemperatura = $(\"#dodajVitalnoTelesnaTemperatura\").val();","\tvar sistolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakSistolicni\").val();","\tvar diastolicniKrvniTlak = $(\"#dodajVitalnoKrvniTlakDiastolicni\").val();","\t//var nasicenostKrviSKisikom = $(\"#dodajVitalnoNasicenostKrviSKisikom\").val();","\tvar merilec = $(\"#dodajVitalnoMerilec\").val();","","\tif (!ehrId || ehrId.trim().length == 0) {","\t\t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");","\t} else {","\t\t$.ajaxSetup({","\t\t    headers: {\"Ehr-Session\": sessionId}","\t\t});","\t\tvar podatki = {","\t\t\t// Preview Structure: https://rest.ehrscape.com/rest/v1/template/Vital%20Signs/example","\t\t    \"ctx/language\": \"en\",","\t\t    \"ctx/territory\": \"SI\",","\t\t    \"ctx/time\": datumInUra,","\t\t    \"vital_signs/height_length/any_event/body_height_length\": telesnaVisina,","\t\t    \"vital_signs/body_weight/any_event/body_weight\": telesnaTeza,","\t\t   \t\"vital_signs/body_temperature/any_event/temperature|magnitude\": 0,","\t\t    \"vital_signs/body_temperature/any_event/temperature|unit\": \"°C\",","\t\t    \"vital_signs/blood_pressure/any_event/systolic\": sistolicniKrvniTlak,","\t\t    \"vital_signs/blood_pressure/any_event/diastolic\": diastolicniKrvniTlak,","\t\t    \"vital_signs/indirect_oximetry:0/spo2|numerator\": 0,","\t\t};","\t\tvar parametriZahteve = {","\t\t    \"ehrId\": ehrId,","\t\t    templateId: 'Vital Signs',","\t\t    format: 'FLAT',","\t\t    committer: merilec","\t\t};","\t\t$.ajax({","\t\t    url: baseUrl + \"/composition?\" + $.param(parametriZahteve),","\t\t    type: 'POST',","\t\t    contentType: 'application/json',","\t\t    data: JSON.stringify(podatki),","\t\t    success: function (res) {","\t\t    \tconsole.log(res.meta.href);","\t\t        $(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-success fade-in'>\" + res.meta.href + \".</span>\");","\t\t    },","\t\t    error: function(err) {","\t\t    \t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t    }","\t\t});","\t}","}","function generator(){","\t$(\"#dodajVitalnoDatumInUra\").val(stevilka(1994, 2014) +\"-\"+ stevilka2(1,12)+\"-\"+stevilka2(1,28)+\"T\"+stevilka2(0,23)+\":\"+stevilka2(0,59));","\t$(\"#dodajVitalnoTelesnaVisina\").val(stevilka(130, 215));","\t$(\"#dodajVitalnoTelesnaTeza\").val(stevilka(40,180));","\t$(\"#dodajVitalnoKrvniTlakSistolicni\").val(stevilka(50, 220));","\t$(\"#dodajVitalnoKrvniTlakDiastolicni\").val(stevilka(40, 120));","\t$(\"#dodajVitalnoMerilec\").val('Marija');","}","","function stevilka(min, max){","\tvar st= Math.floor(Math.random()* (max - min + 1)) + min;","\treturn st;","}","","function stevilka2(min, max){","\tvar st= Math.floor(Math.random()* (max - min + 1)) + min;","\tif (st < 10){","\t\tst= \"0\"+st;","\t}","\treturn st;","}","","","function preberiMeritveVitalnihZnakov() {","\tsessionId = getSessionId();\t","\tvar ehrId = $(\"#meritveVitalnihZnakovEHRid\").val();","\t$(\"#rezultatMeritveVitalnihZnakov\").empty();","\t\t\tvar AQL =\t\"select \" +","\t\t\t\t\t        \"a_a/data[at0002]/events[at0003]/time/value as cas, \" +","\t\t\t\t\t        \"a_b/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/magnitude as tlak_d, \" +                                         ","\t\t\t\t\t        \"a_b/data[at0001]/events[at0006]/data[at0003]/items[at0004]/value/magnitude as tlak_s, \" +","\t\t\t\t\t        \"a_c/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as visina, \" +","\t\t\t\t\t        \"a_d/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as teza \" +","\t\t\t\t\t\t\"from EHR e[ehr_id/value='\"+ehrId+\"']\" +","\t\t\t\t\t\t\"contains COMPOSITION a \" +","\t\t\t\t\t\t\"contains ( \" +","\t\t\t\t\t\t        \"OBSERVATION a_d[openEHR-EHR-OBSERVATION.body_weight.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_c[openEHR-EHR-OBSERVATION.height.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_temperature.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_b[openEHR-EHR-OBSERVATION.blood_pressure.v1]) \" +               ","\t\t\t\t\t\t\"offset 0 limit 5\";","\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/query?\" + $.param({\"aql\": AQL}),","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Datum in ura</th></tr>\";","\t\t\t\t\t    \tif (res) {","\t\t\t\t\t    \t\tvar rows = res.resultSet;","\t\t\t\t\t\t        for (var i in rows) {","\t\t\t\t\t\t            //results += \"<tr><td class='klikablien-datum'>\" + rows[i].cas + \"</td>\";","\t\t\t\t\t\t         //   results += \"<tr><td><button type='button' class='klikabilen' onclick='preberiMeritveVitalnihZnakov2(this)' value='\"+rows[i].cas+\"'>\"+ rows[i].cas +\"</button></td></tr>\"","   \t\t\t\t\t\t            results += \"<tr><td><button type='button' class='klikabilen' onclick='preberiMeritveVitalnihZnakov2(this.value)' value='\"+rows[i].cas+\"'>\"+ rows[i].cas +\"</button></td></tr>\"","","\t\t\t\t\t\t            ","\t\t\t\t\t\t        }","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        $(\"#rezultatMeritveVitalnihZnakov\").append(results);","\t\t\t\t\t\t        ","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});","\t\t","} ","function preberiMeritveVitalnihZnakov2(a){","\tsessionId = getSessionId();\t","\t","\tvar ehrId = $(\"#meritveVitalnihZnakovEHRid\").val();","\t","\t$(\"#graf\").empty();","\t","\t\t\tvar AQL =\t\"select \" +","\t\t\t\t\t        \"a_a/data[at0002]/events[at0003]/time/value as cas, \" +","\t\t\t\t\t        \"a_b/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/magnitude as tlak_d, \" +                                         ","\t\t\t\t\t        \"a_b/data[at0001]/events[at0006]/data[at0003]/items[at0004]/value/magnitude as tlak_s, \" +","\t\t\t\t\t        \"a_c/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as visina, \" +","\t\t\t\t\t        \"a_d/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as teza \" +","\t\t\t\t\t\t\"from EHR e[ehr_id/value='\"+ehrId+\"']\" +","\t\t\t\t\t\t\"contains COMPOSITION a \" +","\t\t\t\t\t\t\"contains ( \" +","\t\t\t\t\t\t        \"OBSERVATION a_d[openEHR-EHR-OBSERVATION.body_weight.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_c[openEHR-EHR-OBSERVATION.height.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_temperature.v1] and \" +","\t\t\t\t\t\t        \"OBSERVATION a_b[openEHR-EHR-OBSERVATION.blood_pressure.v1]) \" +               ","\t\t\t\t\t\t\"offset 0 limit 5\";","\t\t\t$.ajax({","\t\t\t\t\t    url: baseUrl + \"/query?\" + $.param({\"aql\": AQL}),","\t\t\t\t\t    type: 'GET',","\t\t\t\t\t    headers: {\"Ehr-Session\": sessionId},","\t\t\t\t\t    success: function (res) {","\t\t\t\t\t    \tvar results = \"<table class='table table-striped table-hover'><tr><th>Graf</th></tr>\";","\t\t\t\t\t    \tif (res) {","\t\t\t\t\t    \t\tvar rows = res.resultSet;","\t\t\t\t\t\t        for (var i in rows) {","\t\t\t\t\t\t        \t","\t\t\t\t\t\t            if (rows[i].cas == a){","\t\t\t\t\t\t            \t","\t\t\t\t\t\t\t            var visina = rows[i].visina;","\t\t\t\t\t\t\t            var teza = rows[i].teza;","\t\t\t\t\t\t\t            var tlak_s = rows[i].tlak_s;","\t\t\t\t\t\t\t            var tlak_d = rows[i].tlak_d;","\t\t\t\t\t\t\t            var bmi = rows[i].teza /((rows[i].visina/100)*(rows[i].visina/100));","\t\t\t\t\t\t\t            var tlakS = rows[i].tlak_s+rows[i].tlak_d;","\t\t\t\t\t\t\t           \tvar x=79;","\t\t\t\t\t\t\t           \tvar y=0;","\t\t\t\t\t\t\t           \tvar z=0;","\t\t\t\t\t\t\t           \tif (bmi >=20 && bmi<25){","\t\t\t\t\t\t\t           \t\ty = x;","\t\t\t\t\t\t\t           \t} else if(bmi <20 && bmi>=15 ) {","\t\t\t\t\t\t\t           \t\ty = x + 3 ;","\t\t\t\t\t\t\t           \t}\telse if(bmi <15 ) {","\t\t\t\t\t\t\t           \t\ty = x - 3 ;","\t\t\t\t\t\t\t           \t}\telse if(bmi >=30 ) {","\t\t\t\t\t\t\t           \t\ty = x - 5 ;","\t\t\t\t\t\t\t           \t}\telse if(bmi <30 && bmi>=25 ) {","\t\t\t\t\t\t\t           \t\ty = x - 3 ;","\t\t\t\t\t\t\t           \t}","\t\t\t\t\t\t\t            if (tlakS<=170){","\t\t\t\t\t\t\t            \tz = y - 5;","\t\t\t\t\t\t\t            } else if (tlakS>170 && tlakS<=185){","\t\t\t\t\t\t\t            \tz= y - 1;","\t\t\t\t\t\t\t            }\telse if (tlakS<=190 && tlakS>185){","\t\t\t\t\t\t\t            \tz= y;","\t\t\t\t\t\t\t            } else if (tlakS>190 && tlakS<=200){","\t\t\t\t\t\t\t            \tz= y - 1;","\t\t\t\t\t\t\t            } else if (tlakS>200 && tlakS<=230){","\t\t\t\t\t\t\t            \tz= y - 2;","\t\t\t\t\t\t\t            } else if (tlakS>230 && tlakS<=250){","\t\t\t\t\t\t\t            \tz= y - 3;","\t\t\t\t\t\t\t            } else if (tlakS>250 && tlakS<=300){","\t\t\t\t\t\t\t            \tz= y - 4;","\t\t\t\t\t\t\t            } else if (tlakS>300 && tlakS<=340){","\t\t\t\t\t\t\t            \tz= y - 10;","\t\t\t\t\t\t\t            } else if (tlakS>340){","\t\t\t\t\t\t\t            \tz= y - 15;","\t\t\t\t\t\t\t            }","\t\t\t\t\t\t            ","\t\t\t\t\t\t            }","\t\t\t\t\t\t            ","\t\t\t\t\t\t            ///graffff","\t\t\t\t\t\t        }","\t\t\t\t\t\t        console.log(x+\" \"+y+\" \"+z);","\t\t\t\t\t\t        results += \"</table>\";","\t\t\t\t\t\t        ","\t\t\t\t\t\t        graf(x, y, z);","\t\t\t\t\t\t        ","\t\t\t\t\t    \t} else {","\t\t\t\t\t    \t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Ni podatkov!</span>\");","\t\t\t\t\t    \t}","","\t\t\t\t\t    },","\t\t\t\t\t    error: function() {","\t\t\t\t\t    \t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");","\t\t\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);","\t\t\t\t\t    }","\t\t\t\t\t});","\t\t","}","","function graf(x, y, z){","","\tvar w = 400;","\tvar h = 300;","\tvar padding = 30;","\t","\t//The data for our line","\tvar lineData = [ { \"x\": 3,   \"y\": x},  { \"x\": 6,  \"y\": y}, { \"x\": 9,  \"y\": z}];","\t","\tvar xScale = d3.scale.linear().domain([0, 12]).range([padding, w - padding]);","\tvar yScale = d3.scale.linear().domain([60, 90]).range([h - padding, padding]);","\t","\t//The SVG Container","\tvar svg = d3.select(\"#graf\").append(\"svg\").style(\"border\", \"1px solid red\").style(\"background-color\", \"black\").attr(\"width\", w).attr(\"height\", h);","\t","\t//Define and draw X and Y axes","\tvar xAxis = d3.svg.axis()","\t    .scale(xScale)","\t    .orient(\"bottom\")","\t    .ticks(10);","\t","\tvar yAxis = d3.svg.axis()","\t    .scale(yScale)","\t    .orient(\"left\")","\t    .ticks(10);","\t","\t/*svg.append(\"g\")","\t    .attr(\"class\", \"axis\")","\t    .attr(\"transform\", \"translate(0,\" + (h - padding) + \")\")","\t\t.style(\"fill\",\"red\")","\t    .call(xAxis);*/","\t","\tsvg.append(\"g\")","\t    .attr(\"class\", \"axis\")","\t    .attr(\"transform\", \"translate(\" + padding + \",0)\")","\t\t.style(\"fill\",\"red\")","\t    .call(yAxis);","\t","\tsvg.append(\"text\")","\t\t.attr(\"transform\", \"rotate(-90)\")","\t\t.attr(\"y\", 40)","\t\t.attr(\"x\",-50 - (h / 2))","\t\t.attr(\"dy\", \"1em\")","\t\t.style(\"text-anchor\", \"start\")","\t\t.style(\"fill\",\"red\")","\t\t.text(\"Pričakovana starost ob smrti\");","\t ","\t var lineFunction = d3.svg.line()","\t                          .x(function(d) { return xScale(d.x); })","\t                          .y(function(d) { return yScale(d.y); })","\t                         .interpolate(\"linear\");","\t","\t","\t","\t","\tvar lineGraph = svg.append(\"path\")","\t                            .attr(\"d\", lineFunction(lineData))","\t                           .attr(\"stroke\", \"red\")","\t                            .attr(\"stroke-width\", 2)","\t                            .attr(\"fill\", \"none\");","\t","\t","\t var circles = svg.selectAll(\"circle\").data(lineData).enter().append(\"circle\");","\t var circleAttributes = ","\t circles.attr(\"cx\", function(d) { return xScale(d.x); }).attr(\"cy\", function(d) { return yScale(d.y); }).attr(\"r\", function (d) { return 10; }).style(\"fill\", function(d,i)","\t \t{","\t \t\tif (i == 0) return \"red\";","\t \t\telse if (i == 1) return \"green\";","\t \t\telse if (i == 2) return \"orange\";","\t \t});","\t","\t svg.append(\"text\")","\t .attr(\"x\",xScale(2))","\t .attr(\"y\",yScale(88))","\t .style(\"fill\",\"red\")","\t .style(\"text-anchor\", \"start\")","\t .text(\"Povprečna starost (\" + x+ \" let)\");","\t","\t svg.append(\"text\")","\t .attr(\"x\",xScale(2))","\t .attr(\"y\",yScale(86))","\t .style(\"fill\",\"green\")","\t .style(\"text-anchor\", \"start\")","\t .text(\"Indeks telesne mase (\"+ y+ \" let)\" );","\t","\t svg.append(\"text\")","\t .attr(\"x\",xScale(2))","\t .attr(\"y\",yScale(84))","\t .style(\"fill\",\"orange\")","\t .style(\"text-anchor\", \"start\")","         .text(\"Pritisk (\" + z +\" let)\");","","}","","","$(document).ready(function() {","\t$('#preberiObstojeciEHR').change(function() {","\t\t$(\"#preberiSporocilo\").html(\"\");","\t\t$(\"#preberiEHRid\").val($(this).val());","\t});","\t$('#preberiPredlogoBolnika').change(function() {","\t\t$(\"#kreirajSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\",\");","\t\t$(\"#kreirajIme\").val(podatki[0]);","\t\t$(\"#kreirajPriimek\").val(podatki[1]);","\t\t$(\"#kreirajDatumRojstva\").val(podatki[2]);","\t});","\t$('#preberiObstojeciVitalniZnak').change(function() {","\t\t$(\"#dodajMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\tvar podatki = $(this).val().split(\"|\");","\t\t$(\"#dodajVitalnoEHR\").val(podatki[0]);","\t\t$(\"#dodajVitalnoDatumInUra\").val(podatki[1]);","\t\t$(\"#dodajVitalnoTelesnaVisina\").val(podatki[2]);","\t\t$(\"#dodajVitalnoTelesnaTeza\").val(podatki[3]);","\t\t//$(\"#dodajVitalnoTelesnaTemperatura\").val(podatki[4]);","\t\t$(\"#dodajVitalnoKrvniTlakSistolicni\").val(podatki[4]);","\t\t$(\"#dodajVitalnoKrvniTlakDiastolicni\").val(podatki[5]);","\t\t//$(\"#dodajVitalnoNasicenostKrviSKisikom\").val(podatki[7]);","\t\t//$(\"#dodajIndeksTelesneMase\").val(podatki[8]);","\t\t$(\"#dodajVitalnoMerilec\").val(podatki[6]);","\t});","\t$('#preberiEhrIdZaVitalneZnake').change(function() {","\t\t$(\"#preberiMeritveVitalnihZnakovSporocilo\").html(\"\");","\t\t$(\"#rezultatMeritveVitalnihZnakov\").html(\"\");","\t\t$(\"#meritveVitalnihZnakovEHRid\").val($(this).val());","\t\t","\t\t// Skrij graf","\t\t$(\"#graf\").empty();","\t});","\t","\t/*$(\".klikabilen\").click(function() {","\t    preberiMeritveVitalnihZnakov2($(this).html());","\t});*/","","});","","//*[@id=\"tabele\"]/table[1]/tbody/tr/td/div[2]/table/tbody/tr[14]/td[6]/b zenske 82,9 let","//*[@id=\"tabele\"]/table[1]/tbody/tr/td/div[2]/table/tbody/tr[15]/td[6]/b moski  76,6 let","//#tabele > table:nth-child(1) > tbody > tr > td > div:nth-child(2) > table > tbody > tr:nth-child(15) > td:nth-child(6) > b css moski","//#tabele > table:nth-child(1) > tbody > tr > td > div:nth-child(2) > table > tbody > tr:nth-child(14) > td:nth-child(6) > b css zenske","//http://www.stat.si/novica_prikazi.aspx?id=4815","","","","//function zunanji_vir1(){","//\tvar a;","//\ta = 'select * from html where url=\"http://www.stat.si/novica_prikazi.aspx?id=4815\" and compat=\"html5\" and xpath=\"*//td/b\"'; //mi najde vse vrednosti treba sam 12, 13","//\tconsole.log(a);","//}","//Luka Krhlikar","",""]}]}]]},"ace":{"folds":[],"scrolltop":5740,"scrollleft":0,"selection":{"start":{"row":462,"column":0},"end":{"row":462,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1419159500456,"hash":"b15c4d18b8f79fe86d25711b75afbcdb52f0f019"}